<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>安监局综合信息管理系统</title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- Animate.css -->
    <link href="../vendors/animate.css/animate.min.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">

  </head>

  <body class="login">
  <div style="background-color: deepskyblue;margin: 0px" >
    <div class="row" style="width: 1000px;margin: 0 auto;height: 141px;">
      <img style="width: 100%;height: 100%" src="/static/img/user_top.png" class="img-responsive">
    </div>
  </div>
    <div>
      <a class="hiddenanchor" id="signup"></a>
      <a class="hiddenanchor" id="signin"></a>

      <div class="login_wrapper">
        <div class="animate form login_form">
          <section class="login_content">
            <form id="form_01">
              <h1>安监局综合信息管理系统</h1>
              <div class="form-group">
                <label for="userName" class="col-lg-5 control-label">手机号码:</label>
                <div class="col-lg-2">
                  <input type="text" class="form-control" id="userName" name="userPhoneNumber" placeholder="昵称" oninput="checkUsername()" onfocus="checkUsername()" required>
                </div>
              </div>
              <div class="form-group">
                <label for="userPassword" class="col-lg-5 control-label">密码:</label>
                <div class="col-lg-2">
                  <input type="password" class="form-control" id="userPassword"name="userPassword" placeholder="密码"  oninput="userPasswordNull()" onfocus="userPasswordNull()" required>
                </div>
              </div>
              <div class="form-group">
                <label  class="col-lg-5 control-label"></label>
                <div class="col-lg-2">
                  <button  id="btn_01" class="btn btn-info btn-block" >登录</button>
                </div>
              </div>
              <div class="form-group">
                <div class="col-lg-offset-5 col-lg-2">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox"> 记住我
                    </label>
                    <a href="#" style="margin-left: 45px">忘记密码</a>
                  </div>
                </div>
              </div>

              <div class="clearfix"></div>

              <div class="separator">
                <p class="change_link">新用户？
                  <a href="#signup" class="to_register"> 注册 </a>
                </p>

                <div class="clearfix"></div>
                <br />
                <div id="msg" style="text-align: center;color: red">

                </div>
                <div>
                  <h1><i class="fa fa-paw"></i> 保住头发!</h1>
                  <p>©2020 重庆邮电大学 软件工程学院 华迪实训 保住头发小组</p>
                </div>
              </div>
            </form>
          </section>
        </div>

        <div id="register" class="animate form registration_form">
          <section class="login_content">
            <form>
              <h1>Create Account</h1>
              <div>
                <input type="text" class="form-control" placeholder="Username" required="" />
              </div>
              <div>
                <input type="email" class="form-control" placeholder="Email" required="" />
              </div>
              <div>
                <input type="password" class="form-control" placeholder="Password" required="" />
              </div>
              <div>
                <a class="btn btn-default submit" href="index.html">Submit</a>
              </div>

              <div class="clearfix"></div>

              <div class="separator">
                <p class="change_link">已有账号 ?
                  <a href="#signin" class="to_register"> 登录 </a>
                </p>

                <div class="clearfix"></div>
                <!--存放错误信息-->

              </div>
            </form>
          </section>
        </div>
      </div>
    </div>

  <!-- jQuery -->
  <script src="../vendors/jquery/dist/jquery.min.js"></script>

  <script type="text/javascript">
    $(function () {
      //判断用户名或密码错误；
      $("#btn_01").click(function (e) {
        e.preventDefault();
        // if(
        //         // checkUsername()&&
        //         userPasswordNull()){

          $.post("/user/login",$("#form_01").serialize(),function (data) {
            if(data.code==212){
              $("#msg").text(data.msg)
              window.location.href="/production/main_center.html";
            }else{
              $("#msg").text(data.msg)
              //跳转
            }

          },"json");
        // }

      })

    })
    function checkUsername() {
      var userNameText=$("#userName").val()
      var userNamePatt=/^\w{3,12}$/;
      if(userNameText==""){
        $("#msg").text("用户名不能为空！")
        return false;
      }else {
        if(!userNamePatt.test(userNameText))
        {
          $("#msg").text("用户名不合法！")
          return false;
        }else {
          $("#msg").text("")
          return true;
        }

      }

    }
    function userPasswordNull() {
      var userPasswordText=$("#userPassword").val();
      var userPasswordPatt=/^\w{6,12}$/;
      if(userPasswordText==""){
        $("#msg").text("密码不能为空")
        return false;
      }else {
        if(!userPasswordPatt.test(userPasswordText)){
          $("#msg").text("密码由字母、数字下划线组成！");
          return false;
        }else {
          $("#msg").text("")
          return true;
        }
      }
    }
  </script>
  <!-- Bootstrap -->
  <script src="../vendors/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <!-- FastClick -->
  <script src="../vendors/fastclick/lib/fastclick.js"></script>
  <!-- NProgress -->
  <script src="../vendors/nprogress/nprogress.js"></script>
  <!-- ECharts -->
  <script src="../vendors/echarts/dist/echarts.min.js"></script>

  <!-- Custom Theme Scripts -->
  <script src="../build/js/custom.min.js"></script>
  </body>
</html>
